<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/css/index.css">
    <title>Document</title>

</head>
<body id="bg" class="greenTheme">
    <div class="mid">
        <header>
            <h1 id="title">INDOVINA IL NUMERO</h1>
        </header>
        <div class="par1">
            <ol>
                <li>Il computer sceglierà segretamente un numero intero casuale tra 1 e 100.</li>
                <li>Il tuo obiettivo è indovinare questo numero segreto nel minor numero di tentativi possibile.</li>
                <li>Ad ogni tentativo, inserisci un numero e il computer ti darà un indizio:
                </li>
            </ol>
            <ul>
                <li>Se il tuo numero è troppo basso, ti dirà "Troppo basso, prova un numero più alto!"</li>
                <li>Se il tuo numero è troppo alto, ti dirà "Troppo alto, prova un numero più basso!"</li>
                <li>Se indovini il numero esatto, vincerai la partita!</li>
            </ul>
            <ol>
                <li>Continua a fare tentativi finché non indovini il numero magico.</li>
                <li>Alla fine del gioco, ti verrà mostrato il numero di tentativi che hai impiegato per indovinare.</li>
                <li>Sfida te stesso a indovinare il numero con il minor numero di tentativi possibile!</li>
            </ol>
        </div> 

        
        <div class="text1">Inserisci il numero magico</div>

        <form action="" method="get">
            <input  id="user" type="number" name="user_guess">
            <br>
            <input id="button" type="button" name="guess" class="buttonTheme" value="INDOVINA">
        </form>

        <div id="text2">Non hai ancora scritto un numero!</div>
        <div id="text3">Hai ancora <b>5</b> tentativi</div>

    </div>
        
        

    <script type="text/javascript">
        function sanitize(number) {
            number = parseInt(number)
            return number
        }
    
        function MagicNumber(min, max) {
            let n = 0
            n = Math.random()
            n = n * (max - min)
            n = parseInt(n) + min
            console.log(n)
            return n
        }
    
        let min = 1
        let max = 100
        let tries = 5
        let casualNumber = MagicNumber(min, max)
        let win = false
        let text1 = document.querySelector("#text2")
        let text2 = document.querySelector("#text3")
        let bg = document.querySelector("#bg")
        let button = document.querySelector("#button")
    
        button.addEventListener("click", function (event) {
            console.log(event)
    
            let inputNumber = document.querySelector("#user").value
    
            inputNumber = sanitize(inputNumber)
            console.log(inputNumber)
    
            if (inputNumber <= 0 || inputNumber > 100 || isNaN(inputNumber)) {
                console.log("Inserire un numero valido tra 1 e 100")
                text1.innerHTML="Non hai inserito nessun numero!";
                text2.innerHTML="Inserisci un numero valido";
                return
            }
    
            if (inputNumber === casualNumber) {
                console.log("Bravo hai vinto!")
                win = true
            } else if (inputNumber > casualNumber) {
                console.log("Numero troppo grande!")
                tries = tries - 1
                text1.innerHTML="Numero troppo grande!";
                text2.innerHTML="Hai ancora <b>" + tries + "</b> tentativi";
            } else {
                console.log("Numero troppo piccolo!")
                tries = tries - 1
                text1.innerHTML="Numero troppo piccolo!";
                text2.innerHTML="Hai ancora <b>" + tries + "</b> tentativi";
            }

            if (tries === 3){
                bg.classList.add("yellowTheme")
                bg.classList.remove("greenTheme")
            }else if (tries === 1){
                bg.classList.add("redTheme")
                bg.classList.remove("yellowTheme")
            }
    
            
    
            document.querySelector("#user").value = ""
    
            if (win === true) {
                console.log("Hai indovinato il numero casuale!")
                text1.innerHTML="Bravo hai vinto!";
                text2.innerHTML="";
                button.disabled = true;
                bg.classList.remove("greenTheme")
                bg.classList.remove("yellowTheme")
                bg.classList.remove("redTheme")
                bg.classList.add("greenTheme")
                

            } else if (tries <= 0) {
                console.log("Hai perso! Il numero casuale era: " + casualNumber)
                text1.innerHTML="Hai perso il numero casuale era: " + casualNumber;
                text2.innerHTML="";
                button.disabled = true;
                button.classList.add("redTheme")
                button.classList.remove("buttonTheme")
            }
        })
    </script>
</body>
</html>